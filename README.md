# ココフォリアログ抽出ツール (CCFOLIA Log Viewer)

## 前提
- ココフォリア非公式です。
- 個人利用のために開発しています。
- 公開していますが利用は自己責任でお願いします。

## 概要

TRPGオンラインセッションツール「ココフォリア」から出力されたHTML形式のログファイルを読み込み、キャラクターやタブごとに整理・フィルタリングして表示するためのWebツールです。特にクトゥルフ神話TRPG第6版（CoC6版）のログ解析に特化した機能を備えています。
このツールは単一の`index.html`ファイルで動作し、サーバーへのインストールは不要です。ファイルをブラウザで開くだけで利用できます。

## 主な機能

### 表示とエクスポート
-   **テーブル表示**: アップロードされたHTMLログを「タブ」「名前/タイトル」「内容」の列に整理し、テーブル形式で表示します。
-   **色情報の再現**: 元のログで設定されていた文字色を各行に再現します。
-   **HTMLエクスポート**: フィルタリングで絞り込んだ現在の表示結果を、背景色や文字色のスタイルを維持したまま、新しいHTMLファイルとして書き出すことができます。

### 多彩なフィルタリング機能
-   **タブ名フィルタ**:
    -   ログに含まれるタブ名（`[main]`など）を自動で抽出し、フィルタ用のチェックボックスを生成します。
    -   各タブの横にある**カラーピッカー**で、テーブル行の**背景色**を自由に変更できます。
-   **キャラクターフィルタ**:
    -   ログの中で一度でもダイスロールを行ったキャラクターの名前を自動で抽出し、フィルタ項目を生成します。
    -   ダイスを振っていないキャラクターや`system`の発言は、「system」としてまとめられます。
    -   各キャラクターの横にある**カラーピッカー**で、テーブル行の**文字色**を自由に変更できます。
-   **高度なダイスロールフィルタ (CoC6版)**:
    -   クトゥルフ神話TRPG第6版のダイスロール結果を詳細に分析し、特定の条件で抽出できます。
    -   **抽出対象**: 全ての1d100ロール、成功/失敗、**決定的成功**（出目1〜5）、**致命的失敗**（出目96〜100）。
    -   **対応フォーマット**: 成功判定のあるスキルチェック (`CCB<=...`)、成功判定のない単純な1d100ロール (`1D100 > ...`)、大文字/小文字のダイス表記、全角/半角の不等号など、様々なログ形式に対応しています。

### その他の機能
-   **タブUI**: 「CoC6版」と「CoC7版」の機能を切り替えるためのタブインターフェースを備えています。（現在、CoC7版は準備中です）
-   **プライバシーへの配慮**: 検索エンジンに登録されないよう`noindex`メタタグを設定済みです。Web上に公開した場合でも、検索結果に表示されることはありません。
-   **各種表記**: 利用上の注意書きや権利表記をページ内に掲載しています。

## 使い方

1.  `index.html`ファイルをダウンロードします。
2.  ダウンロードしたファイルをWebブラウザ（Google Chrome, Firefoxなど）で開きます。
3.  ページ上部の注意書きを確認し、「CoC6版」タブが表示されていることを確認します。
4.  [ファイルを選択]ボタンをクリックしてココフォリアから出力したHTMLログファイルをアップロードします。
5.  ログが自動的にテーブルに変換されて表示され、各フィルター項目が生成されます。
6.  必要に応じて、以下の操作を行います。
    -   **絞り込み**: 各フィルターのチェックボックスをオン/オフにし、表示したいログを絞り込みます。
    -   **色分け**: 「タブ名フィルタ」「キャラクターフィルタ」の横にあるカラーピッカーで、背景色や文字色を自由に変更します。
    -   **出力**: [フィルタ結果をHTMLに出力]ボタンをクリックすると、現在の表示内容がHTMLファイルとして保存されます。

## 権利表記

本作は、「株式会社アークライト」及び「株式会社KADOKAWA」が権利を有する『クトゥルフ神話TRPG』シリーズの二次創作物です。
Call of Cthulhu is copyright ©1981, 2015, 2019 by Chaosium Inc. ;all rights reserved. Arranged by Arclight Inc.
Call of Cthulhu is a registered trademark of Chaosium Inc.
PUBLISHED BY KADOKAWA CORPORATION　「クトゥルフ神話TRPG」「新クトゥルフ神話TRPG」
